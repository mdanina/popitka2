# Quick Usage Guide

## Быстрый старт за 3 шага

### 1. Установите зависимости

```bash
pip install -r requirements.txt
```

### 2. Запустите транскрибацию

```bash
python main_pipeline.py your_audio.wav --lang ru --speakers 4
```

### 3. Получите результаты

Система автоматически создаст несколько файлов:
- `your_audio_transcript.txt` - текст с таймстампами
- `your_audio_transcript.md` - форматированный Markdown
- `your_audio_detailed.md` - детальный отчет со статистикой

## Параметры командной строки

### main_pipeline.py

```bash
python main_pipeline.py <audio_file> [options]
```

**Опции:**
- `--lang ru|en` - Язык аудио (по умолчанию: ru)
- `--speakers 1-6` - Максимальное количество спикеров (по умолчанию: 6)
- `--model tiny|base|small|medium|large|large-v3` - Размер модели Whisper (по умолчанию: large-v3)
- `--no-clean` - Пропустить очистку аудио

### Примеры

```bash
# Русский язык, 3 спикера
python main_pipeline.py meeting.wav --lang ru --speakers 3

# Английский язык, быстрая модель
python main_pipeline.py interview.mp3 --lang en --model medium

# Без предобработки аудио
python main_pipeline.py lecture.wav --no-clean
```

## Что происходит внутри

1. **Очистка аудио** (опционально)
   - Конвертация в моно
   - Нормализация до 16 kHz
   - Удаление длинных пауз

2. **Транскрибация (Whisper)**
   - Преобразование речи в текст
   - Создание временных меток
   - Расстановка пунктуации

3. **Диаризация (NeMo)**
   - Извлечение голосовых признаков
   - Кластеризация спикеров
   - Привязка текста к спикерам

4. **Форматирование**
   - Создание читаемых TXT файлов
   - Генерация Markdown документов
   - Расчет статистики

## Выбор количества спикеров

**Важно:** Указывайте максимальное количество спикеров, алгоритм автоматически определит точное число.

- `--speakers 2` - для диалога двух людей
- `--speakers 3-4` - для небольшой встречи
- `--speakers 5-6` - для группового обсуждения

## Выбор модели Whisper

**Для CPU:**
```bash
python main_pipeline.py audio.wav --model small
```

**Для GPU (рекомендуется):**
```bash
python main_pipeline.py audio.wav --model large-v3
```

## Поддерживаемые форматы аудио

- WAV (рекомендуется)
- MP3
- M4A
- FLAC
- OGG
- AAC

## Требования к аудио

**Минимальные:**
- Битрейт: 64 kbps+
- Частота: любая (будет конвертирована)
- Каналы: моно или стерео

**Рекомендуемые:**
- Битрейт: 128 kbps+
- Частота: 16 kHz+
- Формат: WAV или FLAC
- Качество: чистая речь с минимумом фона

## Время обработки

**Примерные оценки (на GPU GTX 1080):**

| Длина аудио | Model Small | Model Medium | Model Large-v3 |
|-------------|-------------|--------------|----------------|
| 10 минут    | 1-2 мин     | 3-4 мин      | 6-8 мин        |
| 30 минут    | 3-5 мин     | 9-12 мин     | 18-24 мин      |
| 60 минут    | 6-10 мин    | 18-25 мин    | 35-50 мин      |

**На CPU время увеличивается в 3-5 раз.**

## Результаты

### Пример TXT файла:

```
[00:00:05] Speaker_1: Добрый день, коллеги!
[00:00:09] Speaker_2: Здравствуйте, давайте начнем.
[00:00:14] Speaker_1: Сегодня обсудим новый проект.
```

### Пример Markdown файла:

```markdown
# Transcription: meeting

**Duration:** 00:45:30
**Speakers:** 3

---

## Transcription

### Speaker_1

**[00:00:05]** Добрый день, коллеги!

**[00:00:14]** Сегодня обсудим новый проект.
```

## Troubleshooting

### "CUDA out of memory"
→ Используйте меньшую модель: `--model medium` или `--model small`

### Медленная обработка
→ Используйте GPU или меньшую модель

### Плохое качество транскрипции
→ Используйте большую модель: `--model large-v3`

### Неправильное определение спикеров
→ Укажите точное количество спикеров

## Дополнительная помощь

Полная документация: `README.md`
Примеры команд: `examples.sh`
